export const meta = {
  emoji: "ğŸ˜",
  title: "Safari íŒì—… ì°¨ë‹¨ ìš°íšŒ ì‚½ì§ˆê¸°",
  date: "2025-05-03",
  preview: "Safariì—ì„œ window.open()ì´ ë§‰í ë•Œ ìš°íšŒí•˜ëŠ” ë°©ë²•",
  tag: "Kioschool",
};

<Header {...meta} />

í‚¤ì˜¤ìŠ¤ì¿¨ ì‹œì—°ì„ ì§„í–‰í•˜ë˜ ì¤‘, ì‚¬ì†Œí•´ ë³´ì´ì§€ë§Œ ì‚¬ì†Œí•˜ì§€ ì•Šì€ ë²„ê·¸ë¥¼ ë§ì´í–ˆë‹¤. í† ìŠ¤ ê²°ì œí•˜ê¸°ë¥¼ ëˆ„ë¥´ë©´ ì›ë˜ëŠ” â€˜í† ìŠ¤â€™ ì•±ìœ¼ë¡œ ë„˜ì–´ê°€ì ¸ì•¼ í•œë‹¤. ê·¸ëŸ¬ë‚˜ í† ìŠ¤ íŒì—…ì´ ëœ¨ì§€ ì•Šê³  ê·¸ëƒ¥ ì£¼ë¬¸ í™•ì¸ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ì¡Œë‹¤. ìƒë‹¹íˆ ë‹¹í™©í–ˆì§€ë§Œ ì›ë˜ ê·¸ë¬ë˜ ê²ƒì²˜ëŸ¼ íƒœì—°íˆ ë„˜ê¸°ê³  ë‹¤ìŒ ê¸°ëŠ¥ ì‹œì—°ì„ ì´ì–´ë‚˜ê°”ë‹¤.

ì‹œì—°ì´ ëë‚˜ê³  ë°”ë¡œ í•´ë‹¹ ë²„ê·¸ì˜ ì›ì¸ì„ ë¶„ì„í–ˆë‹¤. ì›ì¸ ìì²´ëŠ” ê¸ˆë°© ì°¾ì„ ìˆ˜ ìˆì—ˆë‹¤. Safariì—ì„œ íŒì—… ì°¨ë‹¨ì„ ì„¤ì • í–ˆê¸°ì— í† ìŠ¤ íŒì—…ì´ ëœ¨ì§€ ì•Šì•˜ë˜ ê²ƒì´ë‹¤. ì›ì¸ì„ íŒŒì•…í–ˆìœ¼ë‹ˆ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì¸í„°ë„·ì— í•´ê²°ì±…ì„ ê²€ìƒ‰í•´ë³´ì•˜ë‹¤.

[ì‚¬íŒŒë¦¬ íŒì—…ì°¨ë‹¨ ìš°íšŒí•˜ê¸°](https://milooy.github.io/dev/avoid-blocking-popup-in-safari/)ë¥¼ ì°¸ê³ í•˜ë‹ˆ ìƒê°ë³´ë‹¤ ê°„ë‹¨í•´ ë³´ì˜€ë‹¤. ë¹„ë™ê¸° ì½œì„ í•˜ê¸° ì „ì— ë¹„ì–´ìˆëŠ” íŒì—…ì„ ì—´ê³ , ë¹„ë™ê¸°ê°€ ì™„ë£Œëœ í›„ íŒì—…ì˜ urlì„ ê°ˆì•„ë¼ì›€ìœ¼ë¡œì¨ Safariì˜ íŒì—… ì°¨ë‹¨ì„ ìš°íšŒí•˜ëŠ” ë°©ì‹ì´ì—ˆë‹¤.

### BEFORE

```tsx
createOrder(workspaceId, tableNo, orderBasket, customerName)
  .then((res) => {
    // navigate to /order-complete
    window.open(tossUrl);
  })
  .catch(errorHandler);
```

### AFTER

```tsx
let popup: Window | null = null;
popup = window.open(undefined);

createOrder(workspaceId, tableNo, orderBasket, customerName)
  .then((res) => {
    // navigate to /order-complete
    window.open(tossUrl);
  })
  .catch(errorHandler)
  .then(() => {
    popup?.location.replace(tossUrl);
  });
```

ê·¸ëŸ¬ë‚˜ í•œê°€ì§€ ê°„ê³¼í•œ ì ì´ ìˆì—ˆë‹¤. ìœ„ í•´ê²°ì±…ì€ â€˜Safariâ€™ ì—ì„œë§Œ í†µí•˜ëŠ” ê²ƒì´ì—ˆë‹¤. í¬ë¡¬ì´ë‚˜ ì‚¼ì„± ë¸Œë¼ìš°ì €ë¡œ ì ‘ì†í•˜ê²Œ ë˜ë©´ ë¹„ì–´ìˆëŠ” íŒì—…ì´ ì—´ë¦° ì±„ë¡œ ìœ ì§€ëœë‹¤.

### í¬ë¡¬, ì‚¬íŒŒë¦¬, ì‚¼ì„± ë¸Œë¼ìš°ì € ëª¨ë‘ ëŒ€ì‘í•´ë³´ì

ì‚¬íŒŒë¦¬ë§Œ AFTER ë°©ì‹ì„ ì´ìš©í•˜ê³ , ê·¸ ì™¸ ë¸Œë¼ìš°ì €ë“¤ì€ BEFORE ë°©ì‹ì„ ì´ìš©í•´ì•¼ í–ˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ ë¨¼ì € ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €ì˜ ì¢…ë¥˜ë¥¼ íŒŒì•…í•´ì•¼ í–ˆë‹¤. ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ì •ë³´ëŠ” navigator.userAgentì— ë‹´ê²¨ìˆë‹¤.

Chrome

```text,title=Chrome User Agent
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.8161993 Safari/537.36
```

Safari

```text,title=Safari User Agent
Mozilla/5.0 (iPhone; CPU iPhone OS 18_3_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.3.2 Mobile/15E148 Safari/605.1.15 NewsSapphire/30.6.430214001
```

Samsung Browser

```text,title=Samsung Browser User Agent
Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/27.0 Chrome/125.0.0.0 Mobile Safari/537.36 UUID/9a253c5a-6781-4974-8c72-0fede12b2926
```

í˜„ì¬ ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € ì ìœ ìœ¨ ìˆœì„œëŒ€ë¡œ ê°€ì¥ ë†’ì€ 3ê°€ì§€ ë¸Œë¼ìš°ì €ì— ëŒ€í•´ì„œë§Œ ëŒ€ì‘í–ˆë‹¤. ì‚¬ì‹¤ ë¸Œë¼ìš°ì € ë²„ì ¼ ë³„ë¡œë„ userAgent ê°’ë“¤ì´ ë¯¸ì„¸í•˜ê²Œ ë‹¤ë¥´ë‹¤. ê·¸ë˜ì„œ Safariì™€ ê·¸ ì™¸ ë¸Œë¼ìš°ì €ë“¤ì˜ ì°¨ì´ì ì„ ë¶„ì„í–ˆë‹¤.

Safariì˜ userAgent ê°’ì—ëŠ” â€˜Chromeâ€™ì´ ë“¤ì–´ê°€ì§€ ì•Šì§€ë§Œ, ê·¸ ì™¸ ë¸Œë¼ìš°ì €ë“¤ì—ëŠ” ëª¨ë‘ â€˜Chromeâ€™ì´ ë“¤ì–´ê°”ë‹¤.

### Chrome

<MDXImage
  src="/images/bypass-safari/bypass-safari1.png"
  alt="Chrome User Agent í™•ì¸"
/>

### Safari

<MDXImage
  src="/images/bypass-safari/bypass-safari2.png"
  alt="Safari User Agent í™•ì¸"
/>

### Samsung Browser

<MDXImage
  src="/images/bypass-safari/bypass-safari3.png"
  alt="Samsung Browser User Agent í™•ì¸"
/>

```tsx,title=isSafari ë³€ìˆ˜ ì„ ì–¸
const isSafari = userAgent.includes('safari') && !userAgent.includes('chrome');
```

`userAgent` ê°’ì— 'safari'ê°€ í¬í•¨ë˜ê³  'chrome'ì´ í¬í•¨ë˜ì§€ ì•ŠëŠ” ê²½ìš° Safari ë¸Œë¼ìš°ì €ë¡œ íŒë‹¨í•˜ëŠ” isSafari ë³€ìˆ˜ë¥¼ ì„ ì–¸í–ˆë‹¤.

### ì™„ì„± ì½”ë“œ

```tsx,title=bypass-safari
const createOrderAndNavigateToToss = (customerName: string) => {
    const tossUrl = `${tossAccountUrl}&amount=${totalAmount}`;
    const userAgent = navigator.userAgent.toLowerCase();
    const isSafari = userAgent.includes('safari') && !userAgent.includes('chrome');

    let popup: Window | null = null;
    if (isSafari && totalAmount !== 0) {
      popup = window.open(undefined);
    }

    createOrder(workspaceId, tableNo, orderBasket, customerName)
      .then((res) => {
        navigate('order-complete');

        if (!isSafari && totalAmount !== 0) {
          window.open(tossUrl);
        }
      })
      .catch(errorHandler)
      .then(() => {
        if (isSafari && totalAmount !== 0) {
          popup?.location.replace(tossUrl);
        }
      });
  };
```

`isSafari` ë³€ìˆ˜ë¥¼ í†µí•´ ì‚¬íŒŒë¦¬ì™€ ê·¸ ì™¸ ë¸Œë¼ìš°ì €ë“¤ ëª¨ë‘ í† ìŠ¤ ì•±ìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” íŒì—…ì„ ìƒì„±í•  ìˆ˜ ìˆê²Œ ëë‹¤.

ì°¸ê³ ìë£Œ

- https://explore.whatismybrowser.com/useragents/explore/
- https://whatmyuseragent.com/browser/sb/samsung-browser/27
- https://milooy.github.io/dev/avoid-blocking-popup-in-safari/
- https://developer.mozilla.org/en-US/docs/Web/API/Location/href

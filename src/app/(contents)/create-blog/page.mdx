export const meta = {
  emoji: "ğŸ¦¾",
  title: "NextJSë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ë©° ê²ªì€ ì¢Œì¶©ìš°ëŒ íƒí—˜ê¸°",
  date: "2025-04-03",
  preview: "NextJSë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°",
  tag: "blog",
};

<Header {...meta} />

## ì‚¬ìš©í•œ ê¸°ìˆ 

NextJS + TailwindCSS

ë§ˆí¬ë‹¤ìš´ íŒŒì‹±: @next/mdx

ì²˜ìŒì—ëŠ” ë§ˆí¬ë‹¤ìš´ íŒŒì‹±ì„ remark, remark-htmlë¡œ í–ˆì—ˆë‹¤. ê·¸ëŸ¬ë‹¤ê°€ @next/mdx ê°€ nextJSì—ì„œ ì§€ì›í•˜ê¸°ë„ í•˜ê³  ë¬´ì—‡ë³´ë‹¤ ì „ì—­ MDXProviderë¥¼ ì œê³µí•˜ì—¬ì„œ, ì „ì—­ì ì¸ ìŠ¤íƒ€ì¼ë§ í•˜ê¸°ê°€ ìš©ì´í•˜ë‹¤ê³  íŒë‹¨í–ˆë‹¤.

remark, remark-htmlì˜ ê²½ìš°ì—ëŠ” tailwindì˜ [preflight ìŠ¤íƒ€ì¼](https://tailwindcss.com/docs/preflight) ë•Œë¬¸ì—, ê¸°ë³¸ h1, h2, codeì™€ ê°™ì€ íƒœê·¸ë“¤ì˜ ìŠ¤íƒ€ì¼ì´ ì´ˆê¸°í™”ê°€ ëœë‹¤. ê·¸ë ‡ê¸°ì— @base ë ˆì´ì•„ì›ƒì— ì˜¤ë²„ë¼ì´ë“œë¥¼ í•˜ì—¬ì„œ ìŠ¤íƒ€ì¼ì„ ì¬ì •ì˜ í•´ì¤˜ì•¼ í•œë‹¤. ì‚¬ì‹¤ @next/mdxë„ ìŠ¤íƒ€ì¼ì„ MDXProviderì—ì„œ ì¬ì •ì˜ í•´ì¤˜ì•¼ í•˜ì§€ë§Œ. . .(ì¡°ì‚¼ëª¨ì‚¬) ê·¸ë˜ë„ ì´ ë°©ì‹ì´ ì¢€ ë” ê¹”ë”í•˜ë‹¤ê³  ìƒê°í–ˆë‹¤. ê·¸ë¦¬ê³  @next/mdxë¥¼ ì´ìš©í•¨ìœ¼ë¡œì„œ NextJSì— ìµœì í™” ëœ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆê¸°ì— @next/mdxë¥¼ ì‚¬ìš©í–ˆë‹¤. ì•„ë˜ëŠ” ë‚´ê°€ í–ˆë˜ ì‚½ì§ˆì— ëŒ€í•œ ë‚´ìš©ì´ë‹¤.

## TailwindCSS Preflight

ì•  ë¨¹ì—ˆë˜ ë¶€ë¶„ ì¤‘ í•˜ë‚˜ëŠ”, ë§ˆí¬ë‹¤ìš´ì— ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ëŠ” ê²ƒì´ì—ˆë‹¤. í•˜.. ì •ë§ ì´ê±° ë•Œë¬¸ì— ê³ ìƒì„ í–ˆë‹¤. tailwindì˜ preflight ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” ë•Œë¬¸ì— ëª¨ë“  íƒœê·¸ë“¤ì˜ ìŠ¤íƒ€ì¼ì´ ì´ˆê¸°í™”ê°€ ì´ë£¨ì–´ì ¸ì„œ markdowníŒŒì‹±ì´ ì„±ê³µì ìœ¼ë¡œ `<pre><code>` . . ì™€ ê°™ì´ ì´ë£¨ì–´ì¡Œì–´ë„ ìŠ¤íƒ€ì¼ì€ ê·¸ëŒ€ë¡œì˜€ë‹¤.

ê·¸ë˜ì„œ ì–´ë–»ê²Œ í•´ê²°ì„ ì‹œë„í–ˆëƒ . . . ë§¨ ì²˜ìŒì—ëŠ” ì „ì—­ css íŒŒì¼ì— base ë ˆì´ì–´ë¥¼ í™•ì¥í•´ì„œ ì¼ë‹¤. ê·¸ ì´ìœ ëŠ” Preflightë¥¼ ìœ ì§€í•˜ë©´ì„œ í•„ìš”í•œ ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ì„ ë§ë¶™ì´ëŠ” ê²ƒì´ ì¼ê´€ì„±ê³¼ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ê²°ê³¼ë¥¼ ë³´ì¥í•˜ëŠ” ë°©ë²•ì´ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ëŸ¬ë‹¤ê°€, @next/mdxë¡œ ë§ˆí¬ë‹¤ìš´ íŒŒì‹±í•˜ëŠ” ë°©ì‹ì„ ë°”ê¾¸ê³  ë‚˜ì„œëŠ”, mdxì „ì—­ Providerì— ê° íƒœê·¸ì— ë§ì¶˜ ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì˜í•˜ì—¬ ë§¤í•‘í•´ì£¼ì—ˆë‹¤.

### BEFORE

```css,title=global.css
@layer base {
  .main {
    display: flex;
    flex-direction: column;
    overflow: hidden;
    word-wrap: break-word;
    font-size: 1.125rem; /* ê¸°ë³¸ ë³¸ë¬¸ í¬ê¸° = 18px */
    padding: 30px 0;
    box-sizing: border-box;
    line-height: 1.8;
    color: hsl(var(--foreground));
    max-width: 1000px;
  }

  .main h1 {
    font-size: 2.5rem; /* ì•½ 40px */
    font-weight: 800;
    line-height: 1.2;
    margin: 1rem 0;
  }

  .main h2 {
    font-size: 2rem;
    font-weight: 700;
    margin: 1rem 0;
  }

  .main h3 {
    font-size: 1.75rem;
    font-weight: 600;
    margin: 1rem 0;
  }
}
```

### AFTER

```tsx,title=mdx-components.tsx
import type { MDXComponents } from "mdx/types";
import React from "react";
import { Pre } from "./components/Pre";
import Header from "./components/Header";
import Footer from "./components/Footer";

const H1: React.FC<React.HTMLAttributes<HTMLHeadingElement>> = (props) => (
  <h1 className="text-4xl font-bold my-7" {...props} />
);
const H2: React.FC<React.HTMLAttributes<HTMLHeadingElement>> = (props) => (
  <h2 className="text-3xl font-semibold my-6" {...props} />
);
const H3: React.FC<React.HTMLAttributes<HTMLHeadingElement>> = (props) => (
  <h3 className="text-2xl font-semibold my-5" {...props} />
);
. . .

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    h1: H1,
    h2: H2,
    h3: H3,
    . . .
    ...components,
  };
}

```

## ê°œë°œ ë¸”ë¡œê·¸ì˜ í•µì‹¬ - ì½”ë“œë¸”ëŸ­

ë‹¤ìŒìœ¼ë¡œ ì•  ë¨¹ì—ˆë˜ ë¶€ë¶„ì€ ë°”ë¡œ ì½”ë“œë¸”ëŸ­ì´ë‹¤. ì½”ë“œ ë¸”ëŸ­ì— ê° ì–¸ì–´ì— ë§ì¶˜ ë¬¸ë²• í•˜ì´ë¼ì´íŠ¸ ê¸°ëŠ¥ì´ ìˆì–´ì•¼ í•˜ëŠ”ë°, ê·¸ê²Œ í•˜ë‚˜ë„ ì—†ë‹¤ ë³´ë‹ˆ ë„ˆë¬´ í—ˆì ‘í•œ ëŠë‚Œì´ ë“¤ì—ˆë‹¤. ê·¸ë˜ì„œ prism-react-rendererë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í–ˆë‹¤.

```tsx
// mdx-components.tsx
export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    h1: H1,
    . . . .
    code: InlineCode,
    pre: CodeBlock,
    ...components,
  };
}

// CodeBlock.tsx
const CodeBlock: React.FC<CodeBlockProps> = ({ code, language }) => {
  if (!code) return null;

  return (
    <Highlight theme={themes.shadesOfPurple} code={code} language={language}>
      {({ style, tokens, getLineProps, getTokenProps }) => (
        <pre style={style}>
          {tokens.map((line, i) => (
            <div key={i} {...getLineProps({ line })}>
              <span>{i + 1}</span>
              {line.map((token, key) => (
                <span key={key} {...getTokenProps({ token })} />
              ))}
            </div>
          ))}
        </pre>
      )}
    </Highlight>
  );
};
```

ì›ë˜ëŠ” ìœ„ì™€ ê°™ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì˜í•˜ì—¬ ì‚¬ìš©í–ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ì˜ë„í•œ ëŒ€ë¡œ ì½”ë“œë¸”ëŸ­ì´ ë Œë”ë§ë˜ì§€ ì•Šì•˜ë‹¤. ë°”ë¡œ props(code, language)ê°€ undefinedë¡œ ë„˜ê²¨ì§€ê³  ìˆì—ˆë‹¤.

[í•´ë‹¹ ë¬¸ì„œ](https://mdxjs.com/packages/react/#fields)ì—ì„œ mdxì˜ providerì—ì„œëŠ” ì½”ë“œë¸”ëŸ­ ì •ë³´ë¥¼ childrenìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œì•„ëƒˆë‹¤. childrenì€ Reac.Node íƒ€ì…ì´ë‹¤.

```js,title=children
{
  '$$typeof': Symbol(react.transitional.element),
  type: [Function: InlineCode],
  key: null,
  props: {
    className: 'language-javascript',
    children: 'function greet(name) {\r\n' +
      '  return `Hello, ${name}!`;\r\n' +
      '}\r\n' +
      '\r\n' +
      'console.log(greet("World"));\n'
  },
  _owner: {
    name: 'MDXContent',
    env: 'Server',
    key: null,
    owner: null,
    props: { params: [Promise], searchParams: [Promise] }
  },
  _store: {}
}
```

ì‹¤ì œ ìš°ë¦¬ê°€ ì‘ì„±í•œ ì½”ë“œëŠ” children.props.childrenì— ë¬¸ìì—´ í˜•íƒœë¡œ ìˆë‹¤. ê·¸ë¦¬ê³  ì–´ë–¤ í™•ì¥ìë¡œ ì¼ëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ëŠ” classNameìœ¼ë¡œ ë„˜ê²¨ë°›ì„ ìˆ˜ ìˆë‹¤.

```tsx
export default function CodeBlock({
  children, // React ë…¸ë“œ - ì½”ë“œ ë°ì´í„° ì–»ê¸° ìœ„í•¨

}: CodeBlockProps): JSX.Element {
. . .
const className = children?.props.className; // ì½”ë“œê°€ ì–´ë–¤ í¬ë§·ìœ¼ë¡œ ì“°ì˜€ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•¨('language-<í¬ë§·>' í˜•íƒœ)
```

ì´ì œ í•´ë‹¹ ì–¸ì–´ì— ëŒ€í•œ ë‚´ìš©ì„ prism-react-rendererì—ì„œ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì¸ Highlightì— ë„˜ê²¨ì£¼ë©´ ëœë‹¤.

code: children.props.childer, language: children.props.className ì´ë ‡ê²Œ ì¶”ì¶œí•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ê·¸ëŸ¬ë‚˜ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¶”ê°€í•´ì„œ í•´ë‹¹ ì†ì„±ì— ëŒ€í•´ ëª…ì‹œí•´ì¤˜ì•¼ í•œë‹¤. ê·¸ëŸ¬ì§€ ì•Šìœ¼ë©´ `unknown' í˜•ì‹ì— 'className' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.` ì—ëŸ¬ê°€ ìƒê¸´ë‹¤.

```tsx
interface CodeElementProps {
  children?: string;
  className?: string;
}
```

ìœ„ ë‚´ìš©ì„ ë°˜ì˜í•œ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```jsx
const { className: codeClassName } = children.props as CodeElementProps;
const { title, highlight, language } = parseMeta(codeClassName);

const { children: codeString } = children.props as CodeElementProps;
const code = typeof codeString === "string" ? codeString : "";

return (
    <Highlight theme={themes.dracula} code={code} language={language}>
      {({ style, tokens, getLineProps, getTokenProps }) => {
        const slicedTokens = tokens.slice(0, -1);

        return (
          <pre
            style={{
              ...style,
              borderRadius: "10px",
              padding: "10px 0",
              margin: "20px 0",
            }}
          >
            {slicedTokens.map((line, i) => (
              <div key={i} {...getLineProps({ line })}>
                <span style={{ padding: "0 15px 0 10px", color: "#6a6192" }}>
                  {i + 1}
                </span>
                {line.map((token, key) => (
                  <span key={key} {...getTokenProps({ token })} />
                ))}
              </div>
            ))}
          </pre>
        );
      }}
    </Highlight>
  );
```

## ì´ë²ˆì—” postsê°€ ì•ˆë³´ì„

`/posts` ê²½ë¡œë¡œ ê°€ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚´ê°€ ì‘ì„±í•œ ê¸€ë“¤ì´ ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ë³´ì—¬ì•¼ í•œë‹¤.

<MDXImage
  src="/images/create-blog/create-blog1.png"
  alt="ì›ë˜ë¼ë©´ ë³´ì—¬ì•¼í•  ê´‘ê²½"
/>

ë°°í¬ë¥¼ í•˜ê³  ë“¤ì–´ê°€ ë³´ë‹ˆ ì—ëŸ¬ê°€ ë‚˜ë¥¼ ë°˜ê²¨ì¤¬ë‹¤.(ì–¸ì œë´ë„ ì „í˜€ ë°˜ê°‘ì§€ ì•Šì€ ì¹œêµ¬ë‹¤.)

<MDXImage src="/images/create-blog/create-blog2.png" alt="ë‚´ê°€ ë³¸ ê´‘ê²½" />

<MDXImage src="/images/create-blog/create-blog3.png" alt="ì„œë²„ ë¡œê·¸" />

í•´ë‹¹ ê²½ë¡œì— ì¡´ì¬í•˜ëŠ” íŒŒì¼ì´ ì—†ë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤. . .

ì™œì§€? ë¡œì»¬ì—ì„  ì˜ ëëŠ”ë°, ë¹Œë“œí•˜ì—¬ ë°°í¬ë¥¼ í•˜ë‹ˆ í•´ë‹¹ ë¬¸ì œê°€ ìƒê¸°ëŠ” ê±¸ê¹Œ?

ì•„ë¿”ì‹¸! í˜„ì¬ mdx íŒŒì¼ë“¤ì„ ì°¾ê¸° ìœ„í•´ /(contents)ì•„ë˜ì˜ í´ë”ë“¤ì˜ page.mdxë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ê°€ì ¸ì˜¤ê³  ìˆì—ˆë‹¤.

```jsx,title=getPosts
const posts = await Promise.all(
  slugs.map(async (slug) => {
    const data = await import(`../app/(contents)/${slug}/page.mdx`);
    const metadata = data.meta;
    return { slug, ...metadata } as PostData;
  })
);
```

ê·¸ëŸ¬ë‚˜ ì—¬ê¸°ì„œ ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ì€ ë°”ë¡œ ìƒëŒ€ê²½ë¡œë¥¼ ì´ìš©í•˜ê³  ìˆë‹¤ëŠ” ì ì´ë‹¤.

ë°°í¬ë¥¼ í•˜ê²Œ ë˜ë©´ í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬(process.cwd())ì™€ì˜ ìƒëŒ€ ê´€ê³„ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ ì˜¬ë°”ë¥¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì§€ ëª»í•˜ê²Œ ëœë‹¤. ê·¸ë˜ì„œ process.cwd()ë¥¼ í†µí•´ ì ˆëŒ€ê²½ë¡œë¡œ ëª…ì‹œë¥¼ í•´ì¤˜ì•¼ í•œë‹¤.

```tsx
// MDX íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬
const postsDir = path.join(process.cwd(), "src", "app", "(contents)");
```

## ì‚¬ì†Œí•œ ì˜¤ë¥˜

remark í”ŒëŸ¬ê·¸ì¸ì„ ì ìš©í•˜ê³ ,pnpm run dev ë¥¼ í†µí•´ dev ì„œë²„ë¥¼ ëŒë ¸ëŠ”ë°,,, ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ëŒì•„ê°€ì§ˆ ì•Šì•˜ë‹¤.

```tsx,title=next.config.ts
import remarkGfm from "remark-gfm";
import createMDX from "@next/mdx";

/** @type {import('next').NextConfig} */
const nextConfig = {
  // Allow .mdx extensions for files
  pageExtensions: ["js", "jsx", "md", "mdx", "ts", "tsx"],
  // Optionally, add any other Next.js config below
};

const withMDX = createMDX({
  // Add markdown plugins here, as desired
  options: {
    remarkPlugins: [remarkGfm],
  },
});

// Combine MDX and Next.js config
export default withMDX(nextConfig);
```

ì´ê²Œ ë¬´ìŠ¨ ì—ëŸ¬ì¼ê¹Œ..

```jsx
> next dev --turbo

   â–² Next.js 15.1.7 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.35.53:3000
   - Experiments (use with caution):
     Â· turbo

 âœ“ Starting...
[Error: loader /Users/castle_bell/Documents/Github/bellog/node_modules/.pnpm/@next+mdx@15.2.4_@mdx-js+loader@3.1.0_acorn@8.14.1__@mdx-js+react@3.1.0_@types+react@19.0.10_react@19.0.0_/node_modules/@next/mdx/mdx-js-loader.js for match "*.mdx" does not have serializable options. Ensure that options passed are plain JavaScript objects and values.]
```

[ì´ìŠˆ](https://github.com/vercel/next.js/issues/71819)ë¥¼ ì°¾ì•„ë³´ë‹ˆ dev ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ë’¤ì— â€”turbo í‚¤ì›Œë“œê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ í•´ë‹¹ ë¬¸ì œê°€ ìƒê¸°ëŠ” ë“¯ í—€ë‹¤.

```json,title=package.json
  "scripts": {
    "dev": "next dev --turbo",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "prepare": "husky"
  },
```

ê·¸ë˜ì„œ â€” turboë¥¼ ë¹¼ì¤¬ë”ë‹ˆ ì˜ ëŒì•„ê°”ë‹¤ã…ã… turboëŠ” NextJSì˜ ê¸°ë³¸ ë²ˆë“¤ëŸ¬ì¸ Webpack ëŒ€ì‹ , ë” ì§„ë³´ëœ turbopackì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ëŠ” í‚¤ì›Œë“œë‹¤. ê·¸ëŸ¬ë‚˜ ì•„ì§ ë¶ˆì•ˆì •í•œ ë¶€ë¶„ì´ ìˆëŠ” ê²ƒ ê°™ë‹¤.
